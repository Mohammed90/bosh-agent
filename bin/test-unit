#!/bin/bash

set -e -o pipefail

while getopts ":q:w" opt; do
  case "$opt" in
    q) QUIET=true ;;
    w) WATCH="watch" ;;
  esac
done
shift $(( OPTIND - 1 ))

dir=$(pwd)
if [ -n "$1" ] ; then
  dir=$1
fi

echo -e "Testing packages..."
ginkgo $WATCH -r -race -skipPackage="integration,vendor" $dir
